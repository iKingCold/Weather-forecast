(function(){"use strict";var t={424:function(t,e,i){var a=i(751),s=i(641);function r(t,e,i,a,r,n){const o=(0,s.g2)("WeatherHeader");return(0,s.uX)(),(0,s.Wv)(o)}var n=i(33);const o=(0,s.Lk)("header",null,[(0,s.Lk)("h1",null,"Cal책s & Flink's Weather App")],-1),c={class:"top"},l=(0,s.Lk)("label",{for:"city-input"},null,-1),u=(0,s.Lk)("i",{class:"fa-solid fa-location-dot"},null,-1),h=[u],d={class:"search-history"},y={class:"history-boxes"},p=["onClick"],m={class:"history-city"},g={class:"history-temp-div"},f={class:"history-temp"},v=["src"],k={class:"weather-data"};function w(t,e,i,r,u,w){const L=(0,s.g2)("WeatherForecast");return(0,s.uX)(),(0,s.CE)(s.FK,null,[o,(0,s.Lk)("section",c,[(0,s.Lk)("form",{id:"weather-form",onSubmit:e[3]||(e[3]=(0,a.D$)((()=>{}),["prevent"]))},[l,(0,s.bo)((0,s.Lk)("input",{class:"input-group",type:"text",id:"city-input","onUpdate:modelValue":e[0]||(e[0]=t=>u.city=t),autocomplete:"off",placeholder:"Enter city:"},null,512),[[a.Jo,u.city]]),(0,s.Lk)("button",{class:"input-group",id:"search-button",onClick:e[1]||(e[1]=(...t)=>w.updateWeatherData&&w.updateWeatherData(...t))},"Search!"),(0,s.Lk)("button",{class:"input-group",id:"current-pos-button",onClick:e[2]||(e[2]=e=>{t.$refs.childRef.getCurrentPosition(),u.submitted=!0})},h)],32)]),(0,s.Lk)("section",d,[(0,s.bo)((0,s.Lk)("h2",null,"Recent locations",512),[[a.aG,this.searchHistory.length>0]]),(0,s.Lk)("ul",y,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(u.searchHistory,(t=>((0,s.uX)(),(0,s.CE)("li",{key:t,class:"history-box",onClick:e=>w.showCity(t)},[(0,s.Lk)("h3",m,(0,n.v_)(t.city),1),(0,s.Lk)("div",g,[(0,s.Lk)("h4",f,(0,n.v_)(t.temperature),1),(0,s.Lk)("img",{src:t.weatherIcon},null,8,v)]),(0,s.Lk)("h4",null,(0,n.v_)(t.weatherData),1)],8,p)))),128))])]),(0,s.bo)((0,s.Lk)("section",k,[(0,s.bF)(L,{resultCity:u.resultCity,resultTemp:u.resultTemp,resultWeather:u.resultWeather,largeIcon:u.largeIcon,apiKey:u.apiKey,cityLatitude:u.cityLatitude,cityLongitude:u.cityLongitude,sendGeoCity:w.handleGeoCity,ref:"childRef"},null,8,["resultCity","resultTemp","resultWeather","largeIcon","apiKey","cityLatitude","cityLongitude","sendGeoCity"])],512),[[a.aG,u.submitted]])],64)}const L={key:0,class:"current-weather"},C={class:"current-icon-div"},b=["src"],D={class:"current-weather-div"},W={class:"cityName"},H={key:1,class:"forecast-div"},x={class:"forecast-list"},I={class:"date-section"},$=["src"],F={class:"date-info"},E={class:"forecast-weekday"},_={class:"forecast-date"},T={class:"temp-section"},X=(0,s.Lk)("i",{class:"fa-solid fa-temperature-high"},null,-1),G={class:"temp-info"},O={class:"forecast-maxtemp"},S={class:"forecast-mintemp"},K={class:"rain-section"},A={key:0},j=(0,s.Lk)("i",{class:"fa-solid fa-cloud-rain"},null,-1),U={key:1},P=(0,s.Lk)("i",{class:"fa-solid fa-cloud-meatball"},null,-1),R={key:2},J=(0,s.Lk)("i",{class:"fa-solid fa-cloud"},null,-1),M={class:"condition-section"},N={class:"wind-section"},Q=(0,s.Lk)("i",{class:"fa-solid fa-wind"},null,-1);function q(t,e,i,a,r,o){const c=(0,s.g2)("SvgArrow");return(0,s.uX)(),(0,s.CE)(s.FK,null,[i.resultCity?((0,s.uX)(),(0,s.CE)("div",L,[(0,s.Lk)("div",C,[(0,s.Lk)("img",{src:`${i.largeIcon}`},null,8,b)]),(0,s.Lk)("div",D,[(0,s.Lk)("h2",W,(0,n.v_)(i.resultCity)+" "+(0,n.v_)(i.resultTemp),1)])])):(0,s.Q3)("",!0),r.sevenDayForecast?((0,s.uX)(),(0,s.CE)("div",H,[(0,s.Lk)("ul",x,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.sevenDayForecast.daily,((t,e)=>((0,s.uX)(),(0,s.CE)("li",{class:"forecast-day",key:t.dt},[(0,s.Lk)("section",I,[(0,s.Lk)("img",{class:"forecast-image",src:`${r.imageUrl}${t.weather[0].icon}.png`},null,8,$),(0,s.Lk)("div",F,[(0,s.Lk)("h3",E,(0,n.v_)(0===e?"Today":new Date(1e3*t.dt).toLocaleDateString(void 0,{weekday:"long"})),1),(0,s.Lk)("p",_,(0,n.v_)(new Date(1e3*t.dt).toLocaleDateString(void 0,{month:"long",day:"numeric"})),1)])]),(0,s.Lk)("section",T,[X,(0,s.Lk)("div",G,[(0,s.Lk)("p",O,[(0,s.eW)("Max: "),(0,s.Lk)("strong",null,(0,n.v_)(t.temp.max<1&&t.temp.max>-1?0:t.temp.max.toFixed()),1),(0,s.eW)("째C")]),(0,s.Lk)("p",S,[(0,s.eW)("Min: "),(0,s.Lk)("strong",null,(0,n.v_)(t.temp.min<1&&t.temp.min>-1?0:t.temp.min.toFixed()),1),(0,s.eW)("째C")])])]),(0,s.Lk)("section",K,["rain"in t?((0,s.uX)(),(0,s.CE)("h3",A,[j,(0,s.eW)(" "+(0,n.v_)(t.rain)+" mm",1)])):"snow"in t?((0,s.uX)(),(0,s.CE)("h3",U,[P,(0,s.eW)(" "+(0,n.v_)(t.snow)+" mm",1)])):((0,s.uX)(),(0,s.CE)("h3",R,[J,(0,s.eW)(" 0 mm")]))]),(0,s.Lk)("section",M,[(0,s.Lk)("h4",null,(0,n.v_)(t.weather[0].description),1)]),(0,s.Lk)("section",N,[Q,(0,s.Lk)("h4",null,(0,n.v_)(t.wind_speed.toFixed())+" m/s",1),(0,s.bF)(c,{windDirection:t.wind_deg-180},null,8,["windDirection"])])])))),128))])])):(0,s.Q3)("",!0)],64)}const B={class:"svg-div"},V=(0,s.Lk)("line",{x1:"12",y1:"4",x2:"12",y2:"21",stroke:"black","stroke-width":"1.5"},null,-1),z=(0,s.Lk)("polygon",{points:"12,0 18,8 12,5 6,8",fill:"#f300e7"},null,-1),Y=[V,z];function Z(t,e,i,a,r,o){return(0,s.uX)(),(0,s.CE)("div",B,[((0,s.uX)(),(0,s.CE)("svg",{width:"40",height:"40",viewBox:"0 0 24 24",style:(0,n.Tr)({transform:`rotate(${i.windDirection}deg)`})},Y,4))])}var tt={props:["windDirection"]},et=i(262);const it=(0,et.A)(tt,[["render",Z]]);var at=it,st={props:["resultCity","resultTemp","resultWeather","largeIcon","apiKey","cityLatitude","cityLongitude","sendGeoCity"],components:{SvgArrow:at},data(){return{sevenDayForecast:null,geoCity:null,imageUrl:"https://openweathermap.org/img/wn/",url:"https://api.openweathermap.org/data/2.5/onecall",reverseGeoUrl:"https://api.openweathermap.org/geo/1.0/reverse"}},methods:{async getSevenDayForecast(t,e){const i=`${this.url}?lat=${t}&lon=${e}&exclude=minutely&appid=${this.apiKey}&units=metric`,a=await fetch(i),s=await a.json();this.sevenDayForecast=s},getCurrentPosition(){navigator.geolocation?navigator.geolocation.getCurrentPosition((t=>{let e=t.coords.latitude,i=t.coords.longitude;this.getGeoCity(e,i),this.getSevenDayForecast(e,i)}),(t=>{alert("Error getting location:",t.message)})):alert("Geolocation not supported by this browser")},async getGeoCity(t,e){const i=`${this.reverseGeoUrl}?lat=${t}&lon=${e}&appid=${this.apiKey}`,a=await fetch(i),s=await a.json();this.geoCity=s[0].name,this.sendGeoCity(this.geoCity)}}};const rt=(0,et.A)(st,[["render",q]]);var nt=rt,ot={components:{WeatherForecast:nt},data(){return{apiKey:"0fb98056d14c0b3b443c610b4ebe30e9",apiUrl:"https://api.openweathermap.org/data/2.5/weather",city:"",submitted:!1,resultCity:null,resultTemp:null,resultWeather:null,weatherIcon:null,largeIcon:null,cityLatitude:null,cityLongitude:null,searchHistory:JSON.parse(localStorage.getItem("searchHistory"))||[]}},methods:{async makeApiCall(t){const e=`${this.apiUrl}?appid=${this.apiKey}&q=${t}&units=metric`,i=await fetch(e),a=await i.json();return 200!==a.cod?(alert(`Error: ${a.cod}, ${a.message} \nPlease try again!`),null):{city:a.name,temperature:`${Math.round(a.main.temp)}째C`,weatherData:a.weather[0].description,weatherIcon:"https://openweathermap.org/img/wn/"+a.weather[0].icon+".png",largeIcon:"https://openweathermap.org/img/wn/"+a.weather[0].icon+"@2x.png",coordinates:a.coord}},async updateWeatherData(){let t=this.city;this.city="";let e=await this.makeApiCall(t);null!==e&&(this.cityLatitude=e.coordinates.lat,this.cityLongitude=e.coordinates.lon,this.resultCity=e.city,this.resultTemp=e.temperature,this.resultWeather=e.weatherData,this.weatherIcon=e.weatherIcon,this.largeIcon=e.largeIcon,this.addToHistory({city:this.resultCity,temperature:this.resultTemp,weatherData:this.resultWeather,weatherIcon:this.weatherIcon}),this.submitted=!0,this.$nextTick((()=>{this.$refs.childRef.getSevenDayForecast(this.cityLatitude,this.cityLongitude)})))},addToHistory(t){const e=this.searchHistory.some((e=>e.city===t.city));if(e){let e=this.searchHistory.findIndex((e=>e.city===t.city));this.searchHistory.unshift(this.searchHistory.splice(e,1)[0])}else this.searchHistory.unshift(t),this.searchHistory=this.searchHistory.slice(0,3);localStorage.setItem("searchHistory",JSON.stringify(this.searchHistory))},async showCity(t){this.city=t.city,await this.updateWeatherData()},async handleGeoCity(t){this.city=t,await this.updateWeatherData()},async updateHistoryData(){for(let t=0;t<this.searchHistory.length;t++){let e=this.searchHistory[t].city,i=await this.makeApiCall(e);this.searchHistory[t]=i}}},mounted(){this.updateHistoryData(),setInterval((()=>{this.updateHistoryData()}),6e4)}};const ct=(0,et.A)(ot,[["render",w]]);var lt=ct,ut={name:"App",data(){return{}},components:{WeatherHeader:lt}};const ht=(0,et.A)(ut,[["render",r]]);var dt=ht;(0,a.Ef)(dt).mount("#app")}},e={};function i(a){var s=e[a];if(void 0!==s)return s.exports;var r=e[a]={exports:{}};return t[a](r,r.exports,i),r.exports}i.m=t,function(){var t=[];i.O=function(e,a,s,r){if(!a){var n=1/0;for(u=0;u<t.length;u++){a=t[u][0],s=t[u][1],r=t[u][2];for(var o=!0,c=0;c<a.length;c++)(!1&r||n>=r)&&Object.keys(i.O).every((function(t){return i.O[t](a[c])}))?a.splice(c--,1):(o=!1,r<n&&(n=r));if(o){t.splice(u--,1);var l=s();void 0!==l&&(e=l)}}return e}r=r||0;for(var u=t.length;u>0&&t[u-1][2]>r;u--)t[u]=t[u-1];t[u]=[a,s,r]}}(),function(){i.d=function(t,e){for(var a in e)i.o(e,a)&&!i.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};i.O.j=function(e){return 0===t[e]};var e=function(e,a){var s,r,n=a[0],o=a[1],c=a[2],l=0;if(n.some((function(e){return 0!==t[e]}))){for(s in o)i.o(o,s)&&(i.m[s]=o[s]);if(c)var u=c(i)}for(e&&e(a);l<n.length;l++)r=n[l],i.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return i.O(u)},a=self["webpackChunkweather_forecast"]=self["webpackChunkweather_forecast"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=i.O(void 0,[504],(function(){return i(424)}));a=i.O(a)})();
//# sourceMappingURL=app.6e5a50db.js.map